(function(){var $C=YAHOO.util.Connect;var $D=YAHOO.util.Dom;var $E=YAHOO.util.Event;var _4=YAHOO.util.KeyListener;var _5=YAHOO.env.ua.ie;var _6=(_5==6);var _7=YAHOO.env.ua.gecko;var _8=YAHOO.env.ua.webkit;var _9=YAHOO.env.ua.opera;var _a=YAHOO.lang.isString;var _b=YAHOO.lang.trim;MT.app.Subscribe={init:function(){var _c=$D.get("enter-address-form");var _d=$D.get("subscribe-other");var _e=$D.get("enter-address-mail");_e.focus();$E.on(_d,"click",function(e){$E.stopEvent(e);_c.cityid.style.display="none";_c.cityid.disable=true;_c.cityname.style.display="inline";_d.style.display="none";_c.cityname.focus();$D.get("enter-address-city-label").innerHTML="\u8f93\u5165\u60a8\u7684\u57ce\u5e02\u540d\u79f0\uff1a";});}};MT.app.About={job:function(){var _10=$D.get("about-job-list");var _11=$D.getElementsByClassName("job-title","h3",_10,function(el){$E.on(el,"click",function(e){var _14=$D.getNextSibling(this);var _15=$D.getStyle(_14,"display")=="none";if(_15){_14.style.display="block";$D.replaceClass(this,"fold","unfold");}else{_14.style.display="none";$D.replaceClass(this,"unfold","fold");}});});}};MT.app.Signup={init:function(){var _16=$D.get("signup-user-form");var _17="\u8f93\u5165\u57ce\u5e02\u540d...";var _18=$D.get("signup-email-address");var _19=$D.get("signup-username");var _1a=_16.cityid;var _1b=_16.cityname;var _1c=_1b.parentNode;if(!_18.value){_18.focus();}else{_19.focus();}$E.on(_1a,"change",function(e){var _1e=this.options[this.selectedIndex];if(_1e.value==0){_1c.style.display="inline";_1b.value=_17;_1b.style.color="#999999";}else{_1c.style.display="none";_1b.value="";}});$E.on(_1b,"focus",function(e){if(_1b.value==_17){_1b.style.color="";_1b.value="";}});$E.on(_1b,"blur",function(e){if(_1b.value==""){_1b.style.color="#999999";_1b.value=_17;}});$E.on(_19,"change",function(e){return;var _22="username="+_19.value;$C.asyncRequest("POST","/account/check",{success:function(o){var res=MT.util.getEvalRes(o);if(res.status){}else{alert(res.msg);}},failure:function(o){}},_22);});}};MT.app.Account={charge:function(){var _26=$D.get("credit-card-form");var _27=_26.cardcode;var _28=_26.cardcodefake;var _29=$D.get("credit-card-link");var _2a=$D.get("credit-card-enter");var _2b=$D.get("credit-card-notice");var _2c=$D.get("credit-card-captcha");var _2d=$D.get("credit-card-captcha-img");var _2e=$D.get("credit-card-submit");var _2f=$D.get("credit-card-cancel");var _30=false;$E.on(_29,"click",function(e){if(_2a.style.display=="none"){_2a.style.display="block";_28.focus();}else{_2a.style.display="none";}});$E.on(_26,"submit",function(e){$E.stopEvent(e);var _33=$D.hasClass(_26,"isvalid");if(_33){window.setTimeout(function(){_26.submit();},10);}else{var _34=_28.value;if(_34==""){_28.focus();}else{var _35="cardcode="+_34;var _36=_26.captcha.value;if(isNeedCaptcha()&&_36==""){_26.captcha.focus();return;}else{_35+="&captcha="+_36;}var _37=$C.asyncRequest("POST","/card/chargecheck",{success:function(o){handleResponse(o,_34);},failure:function(o){}},_35);}}});$E.on(_2f,"click",function(e){$D.removeClass(_26,"isvalid");_2b.style.display="none";_28.disabled=false;_27.value="";_2e.value="\u786e\u5b9a";_2f.style.display="none";_28.focus();if(isNeedCaptcha()){$D.addClass(_2c,"show");}refreshCaptcha();});function handleResponse(o,_3c){var res=MT.util.getEvalRes(o);if(res.status){$D.addClass(_26,"isvalid");_28.disabled=true;_27.value=_3c;_2e.value="\u5145\u503c";_2b.innerHTML=res.msg;_2b.style.display="block";_2f.style.display="";_26.token.value=res.data.token;_30=res.data.needCaptcha;if(_30){if($D.hasClass(_2c,"show")){}}else{$D.removeClass(_2c,"show");}}else{_2b.innerHTML=res.msg;_2b.style.display="block";_28.focus();if(res.data&&res.data.needCaptcha){$D.addClass(_2c,"show");_30=true;refreshCaptcha();}}}function isNeedCaptcha(){return _30||$D.hasClass(_2c,"show");}function refreshCaptcha(){if(isNeedCaptcha()){_2d.src=_2d.getAttribute("surl")+"?"+Math.random();}}}};MT.app.Vote={init:function(){var _3e=$D.getElementsByClassName("choice","input","content",function(el){$E.on(el,"click",function(e){var el=$D.get(this.getAttribute("sid"));if(el){if(this.type=="checkbox"){if(this.checked){el.disabled=false;$D.removeClass(el,"disabled");el.focus();}else{el.disabled=true;$D.addClass(el,"disabled");}}else{if(this.type=="radio"){if(this.value==el.getAttribute("cid")){el.disabled=false;$D.removeClass(el,"disabled");el.focus();}else{el.disabled=true;$D.addClass(el,"disabled");}}}}});});var _42=$D.get("label-9-64");var _43=$D.get("label-9-65");var _44=$D.get("vote-list-10");$E.on(_42,"click",function(e){_44.style.display="block";});$E.on(_43,"click",function(e){_44.style.display="none";});}};})();